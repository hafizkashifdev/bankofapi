<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <title>
   NatWest – Developer Portal – Open Banking Sandbox
  </title>
  <meta content="index, follow" name="robots"/>
  <meta content="Thanks to the comprehensive step-by-step documentation of our Sandbox Developer Portal, you can consume Open Banking APIs in less than 5 minutes." name="description"/>
  <script>
   var iVersion="2.6.6-build-108-03c3b2a";
  </script>
  <script>
   var infoEnv;
  </script>
  <script>
   var infoBrand;
  </script>
  <script>
   var infoUsername;
  </script>
  <script>
   var infoEmail;
  </script>
  <link href="/natwest-icon.png" rel="icon"/>
  <link href="/febc265fb2cc455e1b85.css" rel="stylesheet"/>
  <link href="/ec5fb73bff01905d82cd.css" rel="stylesheet"/>
  <script defer="" src="https://widget.usersnap.com/global/load/5aa78e68-87e3-4248-a6ed-dfb7b8eea959?onload=onUsersnapCXLoad">
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet"/>
 </head>
 <body>
  <main id="app">
   <div id="page">
    <div class="notification">
     <button type="button">
      <span class="icon refuse-icon">
      </span>
     </button>
     <p>
      We have performed a brief maintenance operation this Thursday evening. During that time, some users may have experienced difficulties logging in and certain API endpoints may have been unavailable. Thank you for your patience and understanding.
     </p>
    </div>
    <div class="cookienotification notification fixed">
     <div>
      We use cookies and similar technologies on our websites and mobile applications to help provide you with the best online experience.
      <br/>
      By using our sites and apps, you agree that we may store and access cookies and similar technologies on your device.
      <br/>
      You can
      <a href="/api-catalog/4767000/privacy-policy">
       <u>
        find out more and set your preferences here
       </u>
      </a>
      .
     </div>
     <br/>
     <a class="btn btn-small btn-primary">
      I accept
     </a>
    </div>
    <header>
     <nav class="navbar inverted">
      <div class="container">
       <div class="navbar-container">
        <div class="menubar">
         <a href="/">
          <span class="logo">
          </span>
         </a>
         <button class="menu-toggle" type="button">
          <span class="icon menu-icon">
          </span>
          Menu
         </button>
        </div>
        <div class="menu closed">
         <ul>
          <li>
           <a href="/dashboard" scope="secure">
            Dashboard
           </a>
          </li>
          <li>
           <a aria-current="page" class="active" href="/api-catalog" scope="all">
            API Catalogue
           </a>
          </li>
          <li>
           <a href="/help" scope="all">
            Help
           </a>
          </li>
         </ul>
         <div class="menu-right">
          <div class="user-menu">
           <a class="user">
            <span class="icon user-icon">
            </span>
            Azam
           </a>
           <ul class="menu-links">
            <li>
             <a href="#">
              My Profile
             </a>
            </li>
            <li>
             <a href="#">
              About
             </a>
            </li>
            <li>
             <a href="#">
              Logout
             </a>
            </li>
           </ul>
          </div>
          <div class="modal fade out" id="">
           <div class="modal-dialog">
            <button class="close-button" type="button">
             <span class="icon close-icon">
             </span>
            </button>
            <div class="modal-header">
             <h6>
              API Banking Accelerator
             </h6>
            </div>
            <div class="modal-body">
             <div class="about">
              Oolys is a comprehensive multi-bank API Banking Sandbox.
              <dl>
               <dt>
                Version
               </dt>
               <dd>
                2.6.6-build-108-03c3b2a
               </dd>
              </dl>
             </div>
            </div>
            <div class="modal-footer">
             <small>
              Copyright 2018-2021 UseInfinite
             </small>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </nav>
    </header>
    <div class="page-content">
     <div class="data-provider">
      <div class="mdContent">
       <div class="docpane">
        <div class="toc">
         <div class="return-link">
          <a aria-current="page" class="active" href="/api-catalog">
           <span class="icon arrow-back">
           </span>
           Back
          </a>
         </div>
         <div>
          <ul>
           <li>
            <a class="h1" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/getting-started-cma9-event-notification-v4" id="#getting-started-cma9-event-notification-v4">
             Getting Started - CMA9 - Event Notification - v4
            </a>
            <ul>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/key-sandbox-endpoints" id="#key-sandbox-endpoints">
               Key Sandbox endpoints
              </a>
             </li>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/remarks" id="#remarks">
               Remarks
              </a>
             </li>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/goal" id="#goal">
               Goal
              </a>
              <ul>
               <li>
                <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/postman" id="#postman">
                 Postman
                </a>
               </li>
              </ul>
             </li>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/assumptions" id="#assumptions">
               Assumptions
              </a>
             </li>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/receiving-event-notifications" id="#receiving-event-notifications">
               Receiving Event Notifications
              </a>
              <ul>
               <li>
                <a class="h3" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/1-setup-event-subscription" id="#1-setup-event-subscription">
                 1. Setup Event Subscription
                </a>
                <ul>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/retrieve-access-token" id="#retrieve-access-token">
                   Retrieve access token
                  </a>
                 </li>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/submit-event-subscription-aggregated-pollingno-callback-webhook" id="#submit-event-subscription-aggregated-pollingno-callback-webhook">
                   Submit Event Subscription (aggregated polling/no callback webhook)
                  </a>
                 </li>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/submit-event-subscription-webhook-callback-enabled" id="#submit-event-subscription-webhook-callback-enabled">
                   Submit Event Subscription (webhook callback enabled)
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a class="h3" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/2-trigger-an-event" id="#2-trigger-an-event">
                 2. Trigger an event
                </a>
                <ul>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/login-into-the-test-data-webbanking" id="#login-into-the-test-data-webbanking">
                   Login into the Test Data Webbanking
                  </a>
                 </li>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/manually-revoke-the-consent" id="#manually-revoke-the-consent">
                   Manually revoke the consent
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a class="h3" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/3-consume-events" id="#3-consume-events">
                 3. Consume events
                </a>
                <ul>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/aggregated-polling" id="#aggregated-polling">
                   Aggregated Polling
                  </a>
                 </li>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/4767000/getting-started/webhook-callbacks" id="#webhook-callbacks">
                   Webhook Callbacks
                  </a>
                 </li>
                </ul>
               </li>
              </ul>
             </li>
            </ul>
           </li>
          </ul>
         </div>
        </div>
        <div class="doc">
         <h1 id="getting-started-cma9-event-notification-v4">
          Getting Started - CMA9 - Event Notification - v4
         </h1>
         <h2 id="key-sandbox-endpoints">
          Key Sandbox endpoints
         </h2>
         <ul>
          <li>
           Well-known:
           <a href="https://api.sandbox.natwest.com/.well-known/openid-configuration">
            https://api.sandbox.natwest.com/.well-known/openid-configuration
           </a>
          </li>
          <li>
           Token:
           <a href="https://ob.sandbox.natwest.com/token">
            https://ob.sandbox.natwest.com/token
           </a>
          </li>
          <li>
           Resource:
           <ul>
            <li>
             <a href="https://ob.sandbox.natwest.com/open-banking/v4.0/event-subscriptions">
              https://ob.sandbox.natwest.com/open-banking/v4.0/event-subscriptions
             </a>
            </li>
            <li>
             <a href="https://ob.sandbox.natwest.com/open-banking/v4.0/events">
              https://ob.sandbox.natwest.com/open-banking/v4.0/events
             </a>
            </li>
           </ul>
          </li>
         </ul>
         <h2 id="remarks">
          Remarks
         </h2>
         <ul>
          <li>
           Two methods are available to consume events - Aggregate Polling and Webhook Callbacks
          </li>
          <li>
           Only
           <code>
            UK.OBIE.Consent-Authorization-Revoked
           </code>
           event type is supported
          </li>
          <li>
           Polling events are automatically and implicitly acknowledged as soon as they are returned (
           <code>
            ack
           </code>
           and
           <code>
            setErrs
           </code>
           request attributes are discarded)
          </li>
          <li>
           Callback events are acknowledged upon a successful response from the specified callback url
          </li>
         </ul>
         <h2 id="goal">
          Goal
         </h2>
         <div>
          This section aims at giving you a comprehensive step by step tutorial to guide you through the process of accessing events triggered by the platform.
         </div>
         <div>
          We try to limit the steps and the content of the interactions to a strict minimum to focus on the flow: once completed, we encourage you to refer to official CMA9 documentation to explore the details of the specification and its options.
         </div>
         <blockquote>
          <div>
           To make sure that you can quickly complete your first end-to-end business flow, the Sandbox provides a specific test feature that is obviously not available in Production:
          </div>
          <ul>
           <li>
            <code>
             "Allow reduced security"
            </code>
            , allowing you to first focus on business and then add the security aspect: the
            <code>
             x-jws-signature
            </code>
            request header value will not be verified, so you can pass a dummy value
           </li>
          </ul>
          <div>
           To go through this tutorial, you need to activate this test feature by ticking the
           <code>
            "Allow reduced security"
           </code>
           box when you are requesting access to CMA9 event notification API for an App in the developer portal.
          </div>
          <div>
           Once you are ready to implement the security layer, you must deactivate those test features to get the Production-like behaviour.
          </div>
         </blockquote>
         <h4 id="postman">
          Postman
         </h4>
         <div>
          If you are a Postman user, you can easily explore and run the steps of this tutorial using our predefined collection and environment files:
         </div>
         <blockquote>
          <blockquote>
           <div>
            Note that in Postman you have to go in
            <code>
             Preferences or Settings &gt; General
            </code>
            menu
           </div>
           <ul>
            <li>
             in
             <code>
              REQUEST
             </code>
             column, make sure that
             <code>
              Ssl certificate verification
             </code>
             is set to
             <code>
              OFF
             </code>
             (or make sure that the OpenBanking Pre-Production Issuing CA is in your trusted store)
            </li>
           </ul>
           <ul>
            <li>
             in
             <code>
              HEADERS
             </code>
             column, make sure that
             <code>
              Automatically follow redirects
             </code>
             is set to
             <code>
              ON
             </code>
            </li>
           </ul>
          </blockquote>
         </blockquote>
         <div>
          Download and import in Postman
         </div>
         <ul>
          <li>
           the
           <a download="" href="/devDoc/media/GettingStarted-CMA9EventNotification_v4.0.postman_collection.json">
            CMA9 Event Notification collection
           </a>
          </li>
          <li>
           <div>
            and the environment config corresponding to the App you want to use (select App name to download the tailor made file):
           </div>
           <div>
            <ol class="row-list">
             <li>
              <a href="#">
               <dl>
                <dt>
                 Name
                </dt>
                <dd class="name">
                 demo-app-3c216362-f073-42f2-8985-af4031365d94
                </dd>
                <dt>
                 Description
                </dt>
                <dd class="description">
                </dd>
               </dl>
              </a>
             </li>
            </ol>
           </div>
          </li>
         </ul>
         <h2 id="assumptions">
          Assumptions
         </h2>
         <ul>
          <li>
           You have already registered an App in your Team
          </li>
          <li>
           Or you use the demo one
          </li>
         </ul>
         <h2 id="receiving-event-notifications">
          Receiving Event Notifications
         </h2>
         <div>
          Events are  made available via the Aggregated Polling API, or by webhooks which will post to a specified url.
         </div>
         <h3 id="1-setup-event-subscription">
          1. Setup Event Subscription
         </h3>
         <div>
          Before you can receive  events, you must first setup your event subscription.
         </div>
         <h4 id="retrieve-access-token">
          Retrieve access token
         </h4>
         <div>
          To create an event subscription, you'll need to pass an access-token identifying your App: simply replace
          <code>
           CLIENT_ID
          </code>
          and
          <code>
           CLIENT_SECRET
          </code>
          in the curl below to retrieve a valid one:
         </div>
         <br/>
         <br/>
         <div>
          Request:
         </div>
         <pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> -k -X POST \
  https://ob.sandbox.natwest.com/token \
  -H <span class="token string">'Content-Type: application/x-www-form-urlencoded'</span> \
  -d <span class="token string">'grant_type=client_credentials&amp;client_id=CLIENT_ID&amp;client_secret=CLIENT_SECRET&amp;scope=accounts'</span></code></pre>
         <div>
          Response:
         </div>
         <pre class="language-bash"><code class="language-bash">HTTP/1.1 200
status: 200
content-type: application/json<span class="token punctuation">;</span> charset<span class="token operator">=</span>utf-8
 
<span class="token punctuation">{</span>
    <span class="token string">"token_type"</span><span class="token keyword">:</span> <span class="token string">"Bearer"</span>,
    <span class="token string">"access_token"</span><span class="token keyword">:</span> <span class="token string">"iMVB9i7ZChEe9GV...XeOOCD1opOA2IAULQ"</span>,
    <span class="token string">"expires_in"</span><span class="token keyword">:</span> 7200,
    <span class="token string">"scope"</span><span class="token keyword">:</span> <span class="token string">"accounts"</span>
<span class="token punctuation">}</span></code></pre>
         <br/>
         <br/>
         <div>
          Your access-token is the value of the
          <code>
           access_token
          </code>
          attribute in the Response.
         </div>
         <blockquote>
          <div>
           in the example above it would be
           <code>
            iMVB9i7ZChEe9GV...XeOOCD1opOA2IAULQ
           </code>
          </div>
         </blockquote>
         <h4 id="submit-event-subscription-aggregated-pollingno-callback-webhook">
          Submit Event Subscription (aggregated polling/no callback webhook)
         </h4>
         <div>
          Now you can create a subscription by replacing the
          <code>
           ACCESS_TOKEN
          </code>
          in the curl below:
         </div>
         <br/>
         <div>
          Request for subscription for polling (no webhook callback specified):
         </div>
         <pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> -k -X POST \
  https://ob.sandbox.natwest.com/open-banking/v4.0/event-subscriptions \
  -H <span class="token string">'Authorization: Bearer ACCESS_TOKEN'</span> \
  -H <span class="token string">'Content-Type: application/json'</span> \
  -H <span class="token string">'x-jws-signature: DUMMY_SIG'</span> \
  -d <span class="token string">'{
  "Data": {
    "Version": "4.0",
    "EventTypes": [
      "UK.OBIE.Consent-Authorization-Revoked"
    ]
  }
}'</span></code></pre>
         <div>
          Response:
         </div>
         <pre class="language-bash"><code class="language-bash">HTTP/1.1 201
status: 201
content-type: application/json<span class="token punctuation">;</span>charset<span class="token operator">=</span>utf-8

<span class="token punctuation">{</span>
    <span class="token string">"Data"</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
        <span class="token string">"EventSubscriptionId"</span><span class="token keyword">:</span> <span class="token string">"224f1617-9209-4c3a-94d4-94e5629f45ba"</span>,
        <span class="token string">"Version"</span><span class="token keyword">:</span> <span class="token string">"4.0"</span>,
        <span class="token string">"EventTypes"</span><span class="token keyword">:</span> <span class="token punctuation">[</span>
            <span class="token string">"UK.OBIE.Consent-Authorization-Revoked"</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>,
    <span class="token string">"Links"</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
        <span class="token string">"Self"</span><span class="token keyword">:</span> <span class="token string">"https://ob.sandbox.natwest.com/open-banking/v4.0/event-subscriptions/224f1617-9209-4c3a-94d4-94e5629f45ba"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
         <br/>
         <br/>
         <h4 id="submit-event-subscription-webhook-callback-enabled">
          Submit Event Subscription (webhook callback enabled)
         </h4>
         <div>
          Now you can create a subscription by replacing the
          <code>
           ACCESS_TOKEN
          </code>
          in the curl below:
         </div>
         <br/>
         <div>
          Request for subscription for webhook callbacks:
         </div>
         <pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> -k -X POST \
  https://ob.sandbox.natwest.com/open-banking/v4.0/event-subscriptions \
  -H <span class="token string">'Authorization: Bearer ACCESS_TOKEN'</span> \
  -H <span class="token string">'Content-Type: application/json'</span> \
  -H <span class="token string">'x-jws-signature: DUMMY_SIG'</span> \
  -d <span class="token string">'{
  "Data": {
    "Version": "4.0",
    "CallbackUrl": "https://my-domain:1234/callback",
    "EventTypes": [
      "UK.OBIE.Consent-Authorization-Revoked"
    ]
  }
}'</span></code></pre>
         <div>
          Response:
         </div>
         <pre class="language-bash"><code class="language-bash">HTTP/1.1 201
status: 201
content-type: application/json<span class="token punctuation">;</span>charset<span class="token operator">=</span>utf-8

<span class="token punctuation">{</span>
    <span class="token string">"Data"</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
        <span class="token string">"EventSubscriptionId"</span><span class="token keyword">:</span> <span class="token string">"224f1617-9209-4c3a-94d4-94e5629f45ba"</span>,
        <span class="token string">"Version"</span><span class="token keyword">:</span> <span class="token string">"4.0"</span>,
        <span class="token string">"CallbackUrl"</span><span class="token keyword">:</span> <span class="token string">"https://my-domain:1234/callback"</span>,
        <span class="token string">"EventTypes"</span><span class="token keyword">:</span> <span class="token punctuation">[</span>
            <span class="token string">"UK.OBIE.Consent-Authorization-Revoked"</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>,
    <span class="token string">"Links"</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
        <span class="token string">"Self"</span><span class="token keyword">:</span> <span class="token string">"https://ob.sandbox.natwest.com/open-banking/v4.0/event-subscriptions/224f1617-9209-4c3a-94d4-94e5629f45ba"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
         <br/>
         <br/>
         <h3 id="2-trigger-an-event">
          2. Trigger an event
         </h3>
         <div>
          To trigger an event, we will impersonate a test data user and revoke manually a previously approved Account consent.
         </div>
         <blockquote>
          <blockquote>
           <div>
            We are assuming that there is already such a consent existing for your App: should you need help creating one, please click on the
            <code>
             API Catalogue
            </code>
            upper right menu item and consult the
            <code>
             cma9-account
            </code>
            <code>
             Getting started
            </code>
            documentation.
           </div>
          </blockquote>
         </blockquote>
         <h4 id="login-into-the-test-data-webbanking">
          Login into the Test Data Webbanking
         </h4>
         <div>
          Easiest way is to use the direct link that you can find in the Developer Portal:
         </div>
         <ul>
          <li>
           <div>
            Go to the Dashboard screen by clicking on the upper right
            <code>
             Dashboard
            </code>
            menu item
           </div>
          </li>
          <li>
           <div>
            In the
            <code>
             My Teams
            </code>
            list, click on the Team your App belongs to
           </div>
          </li>
          <li>
           <div>
            In the Team details screen, scroll down to the
            <code>
             Test Data
            </code>
            section and click on the
            <code>
             webbanking
            </code>
            direct link.
           </div>
          </li>
          <li>
           <div>
            A new window/tab opens and the home page of the test data Webbanking is displayed
           </div>
          </li>
          <li>
           <div>
            Click on upper right
            <code>
             Login
            </code>
            button, the login page asking for the test user credentials is displayed.
           </div>
           <blockquote>
            <div>
             If you are asked to provide the "
             <code>
              domain name
             </code>
             of your team" (will be the case if you accessed the Webbanking URL directly) just enter the domain of the Team your App belongs to
            </div>
           </blockquote>
           <div>
            <img alt="Bank login screen" src="/devDoc/media/RbsLogin.png"/>
           </div>
           <blockquote>
            <div>
             Image for illustration purpose only, the screen you see may differ in layout/colors but the functionality should be equivalent
            </div>
           </blockquote>
          </li>
          <li>
           <div>
            Follow the authentication flow by filling the credentials of the test user you want to revoke consent for.
           </div>
           <blockquote>
            <div>
             Be careful not to type in your developer portal credentials instead. Here you are impersonating a bank user so fill in the credentials of the targeted test user
            </div>
           </blockquote>
          </li>
          <li>
           Credentials are eventually verified and if correct you should be presented with a page displaying the list of accounts the user owns
          </li>
         </ul>
         <h4 id="manually-revoke-the-consent">
          Manually revoke the consent
         </h4>
         <ul>
          <li>
           <div>
            Click on the upper right
            <code>
             Connected Apps
            </code>
            menu item to access the page listing all currently granted consents
           </div>
           <div>
            <img alt="List of consents authorized by the test data user" src="/devDoc/media/RbsConnectedApps.png"/>
           </div>
          </li>
          <li>
           Identify the one corresponding to your App, click the
           <code>
            REVOKE
           </code>
           button, and confirm. The consent is now revoked and a matching event has been created
          </li>
         </ul>
         <br/>
         <br/>
         <h3 id="3-consume-events">
          3. Consume events
         </h3>
         <div>
          Depending on if your subscription was created with a callback url or not, there are two ways events can be consumed. If no callback url was configured, you can 
use aggregated polling to consume the events. Otherwise, they will be sent to the configured webhook endpoint.
         </div>
         <h4 id="aggregated-polling">
          Aggregated Polling
         </h4>
         <div>
          You can consume the available event(s) using aggregated polling by replacing the
          <code>
           ACCESS_TOKEN
          </code>
          in the curl below:
         </div>
         <blockquote>
          <blockquote>
           <div>
            In this implementation, events are automatically and implicitly acknowledged as soon as they are returned (
            <code>
             ack
            </code>
            and
            <code>
             setErrs
            </code>
            request attributes are discarded).
           </div>
           <div>
            It means that if you perform this call a second time the events returned in the first call response will no longer be returned in the second call response.
           </div>
          </blockquote>
         </blockquote>
         <br/>
         <blockquote>
          <div>
           Notes:
          </div>
          <ul>
           <li>
            <code>
             maxEvents
            </code>
            : max value is 100 (default)
           </li>
           <li>
            <code>
             returnImmediately
            </code>
            : only 'true' (default) is supported
           </li>
          </ul>
         </blockquote>
         <br/>
         <div>
          Request:
         </div>
         <pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> -k -X POST \
  https://ob.sandbox.natwest.com/open-banking/v4.0/events \
  -H <span class="token string">'Authorization: Bearer ACCESS_TOKEN'</span> \
  -H <span class="token string">'Content-Type: application/json'</span> \
  -d <span class="token string">'{
  "maxEvents": 100,
  "returnImmediately": true
}'</span></code></pre>
         <div>
          Response:
         </div>
         <pre class="language-bash"><code class="language-bash">HTTP/1.1 201
status: 201
content-type: application/json<span class="token punctuation">;</span>charset<span class="token operator">=</span>utf-8

<span class="token punctuation">{</span>
    <span class="token string">"moreAvailable"</span><span class="token keyword">:</span> false,
    <span class="token string">"sets"</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
        <span class="token string">"f5d2bab6...jb25zZW50In19fX0"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
         <h4 id="webhook-callbacks">
          Webhook Callbacks
         </h4>
         <div>
          If your subscription has a callback url specified, when an event is received for that subscription, the event will automatically
be posted to the specified callback url.
         </div>
         <br/>
         <blockquote>
          <div>
           Notes:
          </div>
          <ul>
           <li>
            You must have a service running to accept the events. They will be sent as HTTP POST requests.
           </li>
           <li>
            Each event will trigger a single request.
           </li>
           <li>
            The request will contain a 'x-fapi-interaction-id' header with a unique randomly generated value.
           </li>
           <li>
            The specification states that event notification must be acknowledged with a 202 (Accepted) HTTP response replaying the provided x-fapi-interaction-id header value BUT we simply consider any 2xx (Success) HTTP response as enough.
           </li>
          </ul>
         </blockquote>
         <br/>
        </div>
       </div>
      </div>
     </div>
    </div>
    <footer>
     <div class="container">
      <div class="row">
       <div class="column">
        <h6>
         Account
        </h6>
        <nav>
         <a href="/dashboard">
          Dashboard
         </a>
        </nav>
       </div>
       <div class="column">
        <h6>
         Developer Tools
        </h6>
        <nav>
         <a aria-current="page" class="active" href="/api-catalog">
          API Catalogue
         </a>
         <a href="/documentation">
          Documentation
         </a>
         <a href="https://natwest-bankofapi-servicemanagement.atlassian.net/servicedesk/customer/portals" target="_blank">
          Service Desk
         </a>
        </nav>
       </div>
       <div class="column">
        <h6>
         Company
        </h6>
        <nav>
         <a href="/terms">
          Terms &amp; Conditions
         </a>
         <a href="/privacy-policy">
          Privacy Policy
         </a>
        </nav>
       </div>
       <div class="col-sm">
       </div>
      </div>
     </div>
    </footer>
    <button class="scrolltop-button">
    </button>
    <div class="powered-by">
     Powered by
     <em>
      Oolys
     </em>
    </div>
   </div>
   <div id="side-panel">
   </div>
   <div class="modal fade out session-popup" id="">
    <div class="modal-dialog">
     <div class="modal-header">
      <h6>
       Your session is about to expire
      </h6>
     </div>
     <div class="modal-body">
      <span class="expiration-warning">
       You will be automatically logged out in
       <em>
        59
       </em>
       seconds.
       <br/>
       Do you want to extend your session?
      </span>
     </div>
     <div class="modal-footer">
      <button class="btn btn-primary" type="button">
       Continue
      </button>
      <button class="btn btn-default" type="button">
       Logout
      </button>
     </div>
    </div>
   </div>
  </main>
  <script>
   var loadHasBeenTriggered = false;
      window.onUsersnapCXLoad = function(api) {
        api.init({
            user: {
              userId: infoUsername,
              email: infoEmail
            },
            custom: {
                userId: infoUsername,
                brand : infoBrand,
                env : infoEnv
            }
          });
      }
      window.loadUserFeedbackWidget = function() {
        if ( (!loadHasBeenTriggered) && infoUsername && infoBrand) {
            loadHasBeenTriggered = true;
            var script = document.createElement('script');
            script.defer = 1;
            script.src = 'https://widget.usersnap.com/global/load/5aa78e68-87e3-4248-a6ed-dfb7b8eea959?onload=onUsersnapCXLoad';
            document.getElementsByTagName('head')[0].appendChild(script);
        }
      }
  </script>
  <script src="/febc265fb2cc455e1b85.js">
  </script>
  <script src="/7dbd7cfa6c7cb6d881a7.js">
  </script>
  <script src="/1a5f01ff47d07a377494.js">
  </script>
  <script src="/2daa0d06a67874f682c5.js">
  </script>
  <script src="/c617fa727da6d416f6a5.js">
  </script>
  <script src="/07424fde184376e24dea.js">
  </script>
  <script src="/ee4e265cb3dc3d500780.js">
  </script>
  <script src="/04a6b9711f1d30cdc1a2.js">
  </script>
  <script src="/03632d2692dbb192bc9c.js">
  </script>
  <script src="/991cb5d14add34ec9369.js">
  </script>
  <script src="/cd81143e09bd4a3ddd06.js">
  </script>
  <script src="/ad40893dba0f0cc010ca.js">
  </script>
  <script src="/86e32b4ca44cc47a79a5.js">
  </script>
  <script src="/e4687322f7bb906a2df7.js">
  </script>
  <script src="/27eb4f97929598ad3286.js">
  </script>
  <script src="/27861e3fa2db86dca27a.js">
  </script>
  <script src="/447e8d2fec5adde36e43.js">
  </script>
  <script src="/9f29fe08232107e5b5a2.js">
  </script>
  <script src="/9d72a8e94d97ca62f07e.js">
  </script>
  <script src="/1e1d6def47d88d1b6578.js">
  </script>
  <script src="/20d2c1b54999365fe1c3.js">
  </script>
  <script src="/d17eb693468fac87de9d.js">
  </script>
  <script src="/ace96842f9fdef10da09.js">
  </script>
  <script src="/e10dbcadb20790400bd2.js">
  </script>
  <script src="/ec5fb73bff01905d82cd.js">
  </script>
  <!--uspssb-->
  <iframe name="us-entrypoint-globalSetup" style="display: none; height: 0px; width: 0px; z-index: 2147483647; color-scheme: normal;" title="Usersnap Feedback">
  </iframe>
  <!--uspsse-->
  <us-button style="user-select: all;">
  </us-button>
 </body>
</html>


<!-- Iframe 1 Content -->
<html>
 <head>
  <title>
   Usersnap Feedback
  </title>
  <script>
   <br>  window.nonce = "";<br>  window.publicPath = "https://resources.usersnap.com/";<br>
  </script>
  <script src="https://resources.usersnap.com/widget-assets/js/entries/globalSetup/b263c0f1171ea4606316.js">
  </script>
  <style>
   html, body {
  margin: 0px;
  padding: 0px;
  overflow: hidden;
  height: 100%;
  -webkit-tap-highlight-color: transparent;
}
  </style>
 </head>
 <body>
  <div>
  </div>
 </body>
</html>
