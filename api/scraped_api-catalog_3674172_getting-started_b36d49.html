<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <title>
   NatWest – Developer Portal – Open Banking Sandbox
  </title>
  <meta content="index, follow" name="robots"/>
  <meta content="Thanks to the comprehensive step-by-step documentation of our Sandbox Developer Portal, you can consume Open Banking APIs in less than 5 minutes." name="description"/>
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-MD22JGR7QM&amp;cx=c&amp;_slc=1" type="text/javascript">
  </script>
  <script async="" src="https://www.google-analytics.com/analytics.js">
  </script>
  <script>
   var iVersion="2.6.6-build-108-03c3b2a";
  </script>
  <script>
   var infoEnv;
  </script>
  <script>
   var infoBrand;
  </script>
  <script>
   var infoUsername;
  </script>
  <script>
   var infoEmail;
  </script>
  <link href="/natwest-icon.png" rel="icon"/>
  <link href="/febc265fb2cc455e1b85.css" rel="stylesheet"/>
  <link href="/ec5fb73bff01905d82cd.css" rel="stylesheet"/>
  <script crossorigin="anonymous" id="hotjar-init-script">
   (function(h,o,t,j,a,r){h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};h._hjSettings={hjid:4992609,hjsv:6,hjdebug:false};a=o.getElementsByTagName('head')[0];r=o.createElement('script');r.async=1;r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;a.appendChild(r);})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>
  <script async="" src="https://static.hotjar.com/c/hotjar-4992609.js?sv=6">
  </script>
  <script async="" charset="utf-8" src="https://script.hotjar.com/modules.fd66acf0c05ce191d967.js">
  </script>
  <script defer="" src="https://widget.usersnap.com/global/load/5aa78e68-87e3-4248-a6ed-dfb7b8eea959?onload=onUsersnapCXLoad">
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet"/>
 </head>
 <body>
  <main id="app">
   <div id="page">
    <header>
     <nav class="navbar inverted">
      <div class="container">
       <div class="navbar-container">
        <div class="menubar">
         <a href="/">
          <span class="logo">
          </span>
         </a>
         <button class="menu-toggle" type="button">
          <span class="icon menu-icon">
          </span>
          Menu
         </button>
        </div>
        <div class="menu closed">
         <ul>
          <li>
           <a href="/dashboard" scope="secure">
            Dashboard
           </a>
          </li>
          <li>
           <a aria-current="page" class="active" href="/api-catalog" scope="all">
            API Catalogue
           </a>
          </li>
          <li>
           <a href="/help" scope="all">
            Help
           </a>
          </li>
         </ul>
         <div class="menu-right">
          <div class="user-menu">
           <a class="user">
            <span class="icon user-icon">
            </span>
            Azam
           </a>
           <ul class="menu-links">
            <li>
             <a href="#">
              My Profile
             </a>
            </li>
            <li>
             <a href="#">
              About
             </a>
            </li>
            <li>
             <a href="#">
              Logout
             </a>
            </li>
           </ul>
          </div>
         </div>
        </div>
       </div>
      </div>
     </nav>
    </header>
    <div class="page-content">
     <div class="data-provider">
      <div class="mdContent">
       <div class="docpane">
        <div class="toc">
         <div class="return-link">
          <a aria-current="page" class="active" href="/api-catalog">
           <span class="icon arrow-back">
           </span>
           Back
          </a>
         </div>
         <div>
          <ul>
           <li>
            <a class="h1" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/getting-started-customer-discovery-api" id="#getting-started-customer-discovery-api">
             Getting Started - Customer Discovery API
            </a>
            <ul>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/resources" id="#resources">
               Resources
              </a>
             </li>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/assumptions" id="#assumptions">
               Assumptions
              </a>
             </li>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/api-endpoints" id="#api-endpoints">
               API Endpoints
              </a>
              <ul>
               <li>
                <a class="h3" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/post-discoveryindividual" id="#post-discoveryindividual">
                 POST - /discovery/individual
                </a>
                <ul>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/400-bad-request" id="#400-bad-request">
                   400 - Bad Request
                  </a>
                 </li>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/200-match-pending" id="#200-match-pending">
                   200 - Match Pending
                  </a>
                 </li>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/200-no-match" id="#200-no-match">
                   200 - No Match
                  </a>
                 </li>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/404-rule-not-found" id="#404-rule-not-found">
                   404 - Rule Not Found
                  </a>
                 </li>
                </ul>
               </li>
               <li>
                <a class="h3" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/additional-responses" id="#additional-responses">
                 Additional Responses
                </a>
               </li>
              </ul>
             </li>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/postman" id="#postman">
               Postman
              </a>
              <ul>
               <li>
                <a class="h3" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/getting-an-access-token" id="#getting-an-access-token">
                 Getting an access token
                </a>
                <ul>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/client-id-client-secret" id="#client-id-client-secret">
                   Client ID &amp; Client Secret
                  </a>
                 </li>
                 <li>
                  <a class="h4" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/transport-signing-certificates" id="#transport-signing-certificates">
                   Transport &amp; Signing Certificates
                  </a>
                  <ul>
                   <li>
                    <a class="h5" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/steps" id="#steps">
                     Steps
                    </a>
                   </li>
                  </ul>
                 </li>
                </ul>
               </li>
               <li>
                <a class="h3" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/making-requests" id="#making-requests">
                 Making requests
                </a>
               </li>
              </ul>
             </li>
             <li>
              <a class="h2" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/invoking-the-api-outside-of-postman" id="#invoking-the-api-outside-of-postman">
               Invoking the API outside of Postman
              </a>
              <ul>
               <li>
                <a class="h3" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/1-retrieve-access-token" id="#1-retrieve-access-token">
                 1. Retrieve access token
                </a>
               </li>
               <li>
                <a class="h3" href="https://developer.sandbox.natwest.com/api-catalog/3674172/getting-started/2-invoke-endpoints" id="#2-invoke-endpoints">
                 2. Invoke endpoints
                </a>
               </li>
              </ul>
             </li>
            </ul>
           </li>
          </ul>
         </div>
        </div>
        <div class="doc">
         <h1 id="getting-started-customer-discovery-api">
          Getting Started - Customer Discovery API
         </h1>
         <div>
          This document aims at giving you a comprehensive step by step tutorial to guide you through the process of configuring the usage of and executing the Customer Discovery API on Sandbox.
         </div>
         <h2 id="resources">
          Resources
         </h2>
         <ul>
          <li>
           API Sandbox Guide:
           <a href="https://developer.sandbox.natwest.com/documentation/home">
            https://developer.sandbox.natwest.com/documentation/home
           </a>
          </li>
          <li>
           Bank of APIs:
           <a href="https://www.bankofapis.com/products/natwest-group-partner/customer-discovery/">
            https://www.bankofapis.com/products/natwest-group-partner/customer-discovery/
           </a>
          </li>
          <li>
           Token Endpoint:
           <a href="https://ob.sandbox.natwest.com/token">
            https://ob.sandbox.natwest.com/token
           </a>
          </li>
          <li>
           Customer Discovery Technical Documentation:
           <a href="https://www.bankofapis.com/products/natwest-group-partner/customer-discovery/documentation/nwb/3.0.0">
            https://www.bankofapis.com/products/natwest-group-partner/customer-discovery/documentation/nwb/3.0.0
           </a>
          </li>
          <li>
           Customer Discovery OpenAPI Specification:
           <a href="https://developer.sandbox.natwest.com/api-catalog/3674172/specification">
            https://developer.sandbox.natwest.com/api-catalog/3674172/specification
           </a>
          </li>
          <li>
           Customer Discovery Sandbox API Endpoint:
           <a href="https://ob.sandbox.natwest.com/zerocode/bankofapis.com/customer-discovery/v3/discovery/individual">
            https://ob.sandbox.natwest.com/zerocode/bankofapis.com/customer-discovery/v3/discovery/individual
           </a>
          </li>
         </ul>
         <h2 id="assumptions">
          Assumptions
         </h2>
         <div>
          A Sandbox 'App' is required to invoke the endpoint, so the following assumptions apply:
         </div>
         <ul>
          <li>
           You have already registered an App in your Team
          </li>
          <li>
           Or you use the demo one.
          </li>
         </ul>
         <div>
          See the API Sandbox Guide for help on setting this up.
         </div>
         <div>
          Our API has been configured to use Client Credentials as the authentication grant type. This means that your application authentication method can either use an autogenerated client ID and client secret, or 'Transport and signing certificates - Private key JWT'. See the steps below for instructions on how to retrieve an access token using either of these methods.
         </div>
         <h2 id="api-endpoints">
          API Endpoints
         </h2>
         <blockquote>
          <div>
           The base sandbox URL for Customer Discovery is
           <code>
            https://ob.sandbox.natwest.com/zerocode/bankofapis.com/customer-discovery/v3
           </code>
           . The API has been configured to provide one of three responses, depending on the body of the request.
          </div>
         </blockquote>
         <h3 id="post-discoveryindividual">
          POST - /discovery/individual
         </h3>
         <h4 id="400-bad-request">
          400 - Bad Request
         </h4>
         <ul>
          <li>
           If the 'birthdate' body attribute is '01-01-2009' a 400 response will be returned:
          </li>
         </ul>
         <pre class="language-http"><code class="language-http">HTTP/1.1 400
status: 400
content-type: application/json

{
    "code": "RequestFieldValidation",
    "message": "There is something wrong with the request fields provided",
    "errors": [
        {
            "errorCode": "birthdate.RealDate",
            "message": "'01-01-2009' is not a valid date of format YYYY-MM-DD"
        }
    ]
}</code></pre>
         <h4 id="200-match-pending">
          200 - Match Pending
         </h4>
         <ul>
          <li>
           If the 'given_name' body attribute has a 'John' value, a 200 response will be returned:
          </li>
         </ul>
         <pre class="language-http"><code class="language-http">HTTP/1.1 200
status: 200
content-type: application/json

{
    "data": {
        "match_status": "Match Pending"
    }
}</code></pre>
         <h4 id="200-no-match">
          200 - No Match
         </h4>
         <ul>
          <li>
           If the 'given_name' body attribute has a 'Jane' value, a 200 response will be returned:
          </li>
         </ul>
         <pre class="language-http"><code class="language-http">HTTP/1.1 200
status: 200
content-type: application/json

{
    "given_name": "Jane",
    "family_name": "Smith",
    "birthdate": "2009-01-01"
}</code></pre>
         <h4 id="404-rule-not-found">
          404 - Rule Not Found
         </h4>
         <div>
          Any request which does not match these criteria will receive a 'no rule was found' response, which is a Sandbox specific default response. This is not behaviour which the actual API implements.
         </div>
         <h3 id="additional-responses">
          Additional Responses
         </h3>
         <div>
          The Customer Discovery API on Sandbox has been configured against these three requests, and exemplifies the two expected contracts which the real API returns - an invalid request, or a valid request with a match or no match response. To understand the full range of possible contracts and responses, check the Customer Discovery OpenAPI specification and documentation on
          <code>
           bankofapis.com
          </code>
          . The Postman collection also contains documentation where appropriate to explain usage.
         </div>
         <h2 id="postman">
          Postman
         </h2>
         <div>
          If you are a Postman user, you can easily explore and run the steps of this tutorial using our predefined collection and environment files:
         </div>
         <blockquote>
          <blockquote>
           <div>
            Note that in Postman you have to go in
            <code>
             Preferences or Settings &gt; General
            </code>
            menu
           </div>
           <ul>
            <li>
             in
             <code>
              REQUEST
             </code>
             column, make sure that
             <code>
              Ssl certificate verification
             </code>
             is set to
             <code>
              OFF
             </code>
             (or make sure that the OpenBanking Pre-Production Issuing CA is in your trusted store)
            </li>
           </ul>
           <ul>
            <li>
             in
             <code>
              HEADERS
             </code>
             column, make sure that
             <code>
              Automatically follow redirects
             </code>
             is set to
             <code>
              ON
             </code>
            </li>
           </ul>
          </blockquote>
         </blockquote>
         <br/>
         <div>
          Download and import in Postman
         </div>
         <ul>
          <li>
           Download your bankofapis.com/customer-discovery
           <a href="#">
            Postman collection
           </a>
          </li>
          <li>
           <div>
            Download your Postman environment files per Application below:
           </div>
           <ul>
            <li>
             <a href="#">
              demo-app-3c216362-f073-42f2-8985-af4031365d94
             </a>
            </li>
           </ul>
          </li>
         </ul>
         <h3 id="getting-an-access-token">
          Getting an access token
         </h3>
         <div>
          Each request requires an access token. Use the steps below to retrieve and use an access token.
         </div>
         <blockquote>
          <div>
           An access token will expire after 10 minutes. Simply retrieve another access token using the same credentials to automatically populate the variable with a new token.
          </div>
         </blockquote>
         <h4 id="client-id-client-secret">
          Client ID &amp; Client Secret
         </h4>
         <div>
          Once you have imported the Customer Discovery collection, make sure you have
          <code>
           clientId
          </code>
          and
          <code>
           clientSecret
          </code>
          values in your collection or environment variables which match the Client ID and Client Secret of your Sandbox App - you can either download the automatically generated Sandbox ENV file above, or create environment variables manually.
         </div>
         <div>
          Your client credentials are used to retrieve an access token using the
          <em>
           'Retrieve access token'
          </em>
          request in the
          <code>
           Pre-requisites/Client ID &amp; Client Secret
          </code>
          folder. This request will retrieve an access token and automatically set the
          <code>
           access_token
          </code>
          collection variable for you, which will be used for making the other requests.
         </div>
         <h4 id="transport-signing-certificates">
          Transport &amp; Signing Certificates
         </h4>
         <div>
          Import the Customer Discovery collection and ensure you have the following variables set (in either the collection or the environment):
         </div>
         <ul>
          <li>
           <code>
            clientId
           </code>
           <ul>
            <li>
             Set manually or use auto-generated env file
            </li>
           </ul>
          </li>
          <li>
           <code>
            signingPrivateKeyAsPem
           </code>
           <ul>
            <li>
             The private key for your signing certificate
            </li>
           </ul>
          </li>
          <li>
           <code>
            kid
           </code>
           (optional)
           <ul>
            <li>
             If you have used one, overwrite the 'unknown' current value in the collection variables
            </li>
           </ul>
          </li>
         </ul>
         <h5 id="steps">
          Steps
         </h5>
         <ol>
          <li>
           Run the
           <code>
            INIT: Load Crypto Library
           </code>
           at least once
          </li>
          <li>
           Ensure you have set the variables above
          </li>
          <li>
           Add your transport certificate  and key to your Postman Certificates for the host
           <code>
            ob.sandbox.natwest.com
           </code>
           <ul>
            <li>
             File -&gt; Settings -&gt; Certificate -&gt; Add Certificate
            </li>
           </ul>
          </li>
          <li>
           Run the
           <code>
            Retrieve access token
           </code>
           request in the
           <code>
            Certificates
           </code>
           folder
          </li>
         </ol>
         <div>
          A JWT will be generated for you before the request is sent, which will be set in your variables and used in the request to retrieve an access token. This
          <code>
           access_token
          </code>
          is stored automatically in your variables and used in future requests.
         </div>
         <h3 id="making-requests">
          Making requests
         </h3>
         <div>
          There are four requests which have been configured based on the rulesets as outlined in the API Endpoints section above, each with a basic set of tests to confirm the request receives the expected response. The Authorization header configuration has been applied to the collection (though the pre-reqs folder is excluded), as can be seen in the Authorization tab.
         </div>
         <h2 id="invoking-the-api-outside-of-postman">
          Invoking the API outside of Postman
         </h2>
         <h3 id="1-retrieve-access-token">
          1. Retrieve access token
         </h3>
         <div>
          To invoke the Customer Discovery API, you'll need to pass an access-token identifying your App. If you are using the client ID and client secret authentication method, simply replace
          <code>
           CLIENT_ID
          </code>
          and
          <code>
           CLIENT_SECRET
          </code>
          in the curl below to retrieve a valid one:
         </div>
         <div>
          <strong>
           Request:
          </strong>
         </div>
         <pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> -k -X POST \
https://ob.sandbox.natwest.com/token \
-H <span class="token string">'Content-Type: application/x-www-form-urlencoded'</span> \
-d <span class="token string">'grant_type=client_credentials&amp;client_id=CLIENT_ID&amp;client_secret=CLIENT_SECRET'</span></code></pre>
         <div>
          <strong>
           Response:
          </strong>
         </div>
         <pre class="language-http"><code class="language-http">HTTP/1.1 200
status: 200
content-type: application/json; charset=utf-8
 
{
    "token_type": "Bearer",
    "access_token": "Ci5A6huK2OD0d6...kVwLE9FuHwHGCf6xo5",
    "expires_in": 600
}</code></pre>
         <div>
          Your access-token is the value of the
          <code>
           access_token
          </code>
          attribute in the Response.
         </div>
         <h3 id="2-invoke-endpoints">
          2. Invoke endpoints
         </h3>
         <div>
          You can invoke Customer Discovery by replacing the
          <code>
           ACCESS_TOKEN
          </code>
          and using the documented methods/resources in the curl below (without
          <code>
           &lt;&gt;
          </code>
          ):
         </div>
         <div>
          <strong>
           Request:
          </strong>
         </div>
         <pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> -k -X <span class="token operator">&lt;</span>available method<span class="token operator">&gt;</span> \
https://ob.sandbox.natwest.com/zerocode/bankofapis.com/customer-discovery/v3/discovery/individual \
-H <span class="token string">'Authorization: Bearer ACCESS_TOKEN'</span> \
-H <span class="token string">'Accept: application/json'</span> \
-d <span class="token string">'&lt;request body&gt;'</span></code></pre>
         <div>
          <strong>
           Response:
          </strong>
          As outlined in the API endpoints section of this doc, there are three responses which have been configured depending on the request. 200 with a match pending, 200 with no match, and 400 for a bad request. Visit that section to understand how to construct an appropriate request to trigger a desired response.
         </div>
        </div>
       </div>
      </div>
     </div>
    </div>
    <footer>
     <div class="container">
      <div class="row">
       <div class="column">
        <h6>
         Account
        </h6>
        <nav>
         <a href="/dashboard">
          Dashboard
         </a>
        </nav>
       </div>
       <div class="column">
        <h6>
         Developer Tools
        </h6>
        <nav>
         <a aria-current="page" class="active" href="/api-catalog">
          API Catalogue
         </a>
         <a href="/documentation">
          Documentation
         </a>
         <a href="https://natwest-bankofapi-servicemanagement.atlassian.net/servicedesk/customer/portals" target="_blank">
          Service Desk
         </a>
        </nav>
       </div>
       <div class="column">
        <h6>
         Company
        </h6>
        <nav>
         <a href="/terms">
          Terms &amp; Conditions
         </a>
         <a href="/privacy-policy">
          Privacy Policy
         </a>
        </nav>
       </div>
       <div class="col-sm">
       </div>
      </div>
     </div>
    </footer>
    <button class="scrolltop-button">
    </button>
    <div class="powered-by">
     Powered by
     <em>
      Oolys
     </em>
    </div>
   </div>
   <div id="side-panel">
   </div>
  </main>
  <script>
   var loadHasBeenTriggered = false;
      window.onUsersnapCXLoad = function(api) {
        api.init({
            user: {
              userId: infoUsername,
              email: infoEmail
            },
            custom: {
                userId: infoUsername,
                brand : infoBrand,
                env : infoEnv
            }
          });
      }
      window.loadUserFeedbackWidget = function() {
        if ( (!loadHasBeenTriggered) && infoUsername && infoBrand) {
            loadHasBeenTriggered = true;
            var script = document.createElement('script');
            script.defer = 1;
            script.src = 'https://widget.usersnap.com/global/load/5aa78e68-87e3-4248-a6ed-dfb7b8eea959?onload=onUsersnapCXLoad';
            document.getElementsByTagName('head')[0].appendChild(script);
        }
      }
  </script>
  <script src="/febc265fb2cc455e1b85.js">
  </script>
  <script src="/7dbd7cfa6c7cb6d881a7.js">
  </script>
  <script src="/1a5f01ff47d07a377494.js">
  </script>
  <script src="/2daa0d06a67874f682c5.js">
  </script>
  <script src="/c617fa727da6d416f6a5.js">
  </script>
  <script src="/07424fde184376e24dea.js">
  </script>
  <script src="/ee4e265cb3dc3d500780.js">
  </script>
  <script src="/04a6b9711f1d30cdc1a2.js">
  </script>
  <script src="/03632d2692dbb192bc9c.js">
  </script>
  <script src="/991cb5d14add34ec9369.js">
  </script>
  <script src="/cd81143e09bd4a3ddd06.js">
  </script>
  <script src="/ad40893dba0f0cc010ca.js">
  </script>
  <script src="/86e32b4ca44cc47a79a5.js">
  </script>
  <script src="/e4687322f7bb906a2df7.js">
  </script>
  <script src="/27eb4f97929598ad3286.js">
  </script>
  <script src="/27861e3fa2db86dca27a.js">
  </script>
  <script src="/447e8d2fec5adde36e43.js">
  </script>
  <script src="/9f29fe08232107e5b5a2.js">
  </script>
  <script src="/9d72a8e94d97ca62f07e.js">
  </script>
  <script src="/1e1d6def47d88d1b6578.js">
  </script>
  <script src="/20d2c1b54999365fe1c3.js">
  </script>
  <script src="/d17eb693468fac87de9d.js">
  </script>
  <script src="/ace96842f9fdef10da09.js">
  </script>
  <script src="/e10dbcadb20790400bd2.js">
  </script>
  <script src="/ec5fb73bff01905d82cd.js">
  </script>
  <iframe aria-hidden="true" id="_hjSafeContext_89841123" src="about:blank" style="display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;" tabindex="-1" title="_hjSafeContext">
  </iframe>
  <!--uspssb-->
  <iframe name="us-entrypoint-globalSetup" style="display: none; height: 0px; width: 0px; z-index: 2147483647; color-scheme: normal;" title="Usersnap Feedback">
  </iframe>
  <!--uspsse-->
  <us-button style="user-select: all;">
  </us-button>
 </body>
</html>
